---
layout: post
title: "在CentOs上安装软件"
categories:
- linux
---
1. ##源码安装
	
	&emsp;&emsp;**简单介绍。**所谓的源码安装，就是编译安装。在linux系统刚刚开发初期，程序开发人原一般都会发布最新的源码包。源码包就是一系列的C语言源程序，源程序经过编译、连接、生成可执行程序这一过程。所以一个编译器是必须的，在centos上我安装的编译器是Gnome发行的GCC编译器。

	&emsp;&emsp;**安装命令。**<br/>
	`./config --prefix=/install/dir`<br/>或者`./configure --prefix=/install/dir`&emsp;生成makefile文件<br/>
	`make` &emsp;依照makefile文件，调用相应的C语言编译器生成编译文件。<br/>
	`make install`&emsp;把生成的编译文件组织到本地磁盘上<br/>
	&emsp;&emsp;既然源码就是C语言编写的，为什么不用GCC命令直接对源码包进行编译安装，而是用make命令？因为，在编译过程中各个源码文件之间是有依赖关系的。为了解决源码现已安装时，文件编译的先后顺序，所以使用make命令会参照makefile文件对源码文件组织编译。所谓的configure就是在编译的前期干的两件事，一是检测硬件环境，二是检测软件环境。


	&emsp;&emsp;**优缺点。**优点是，在编译安装前会对软硬件环境进行检测，对不同的软硬件环境采取不同的编译安装方案。一般较新的软件包都是用源码发布的，用源码安装往往能安装较新的软件包。同时，如果你对软件有一定的定制要求，也是可以修改源码的，比较灵活。普通用户也可以执行安装，但是必须安装到用户有权限的目录。缺点是，源码安装的软件管理起来不方便。我们都知道，在windows上卸载软件如果直接把安装软件的目录删除，会在系统盘下留下安装痕迹，例如注册表。当下次安装同一款软件的时候，就会出现问题。其实，这些就是windows上软件安装的机制。需要说明的是，在linux开发初期是没有统一软件管理机制的。安装软件就是把可执行文件copy到磁盘上，卸载软件就是把和软件相关的文件移除。但是，我们要知道linux上组织文件的方式和windows上市完全不同的。一个软件的配置文件往往会放在/etc目录下，可执行文件往往会放在/usr/bin或者/usr/local/bin目录下，等都会放在相应的目录下。而不是像windows把安装软件放在同一的目录下，例如c:/progrem。这也是蒙哥在学习初期linux是比较头疼的。所以，这些原因就会给软件卸载带来问题。文件放在不同的目录，要各个删除，比较麻烦。所以我们在用源码安装软件的时候往往会指定安装目录。但是，有时候也是不用指定的。比如一些我们以后不会卸载的软件，例如GCC，这种类型的软件经常使用，并且和系统联系紧密，就没有卸载的必要。
	

2. ##rpm安装

	&emsp;&emsp;**简单介绍。**为了解决源码安装管理不方便的缺点。应运而生了rpm这种软件管理方式（类似于deban系类的deb包）。其实rpm管理软件包就是根据相应的软硬件环境把源码安装的configure和make这两步预先在别的机器上完成了。我们只需要下载rpm包，解压病组织到自己的硬盘上就OK了。

	&emsp;&emsp;**命令**<br/>
	`rpm -ivh pakg.rpm`&emsp;安装软件。<br/>
	`rpm -ivh --test pakg.rpm`&emsp;检测安装环境，并不是真正的安装。<br/>
	`rpm -Uvh pakg.rpm`&emsp;升级软件包<br/>
	`rpm -evh pakg.rpm`&emsp;卸载软件包<br/>
	`rpm -qf fileOfPakg.rpm`&emsp;查询文件属于哪个软件包<br/>
	`rpm -qa | grep forSearchedPakg`&emsp;查找某个软件包是否安装,不要跟扩展名<br/>
	`rpm -ql pakg | grep "example"`&emsp;查找例子文件，一般是配置文件的，例子文件<br/>
	`rpm -qc pakg `&emsp;查找软件包安装的配置文件<br/>
	`rpm -ql pakg | grep "bin\/"`&emsp;列出软件包安装的bin目录，里面放着可执行文件<br/>
	注意，vh这两个参数是现实软件配置过程，可以不加。

	&emsp;&emsp;**优缺点**<br/>
	&emsp;&emsp;优点。rpm解决了源码安装卸载不方便的缺点。所有安装软件的信息都会有一份记录，这样对查找软件和安装软件的文件目录很是方便。缺点。rpm把源码安装的配置和编译过程预先完成了，但是你想想我们的系统软件环境是大同小异的。每个安装好的系统的软件环境都是不相同的，所以rpm包在预先配置和编译的时候，是参照标准发型版本软件环境。标准也就是一个标准，我们很多时候时候标准有一定的偏差的，但是我们应该尽力的像标准靠拢。举个简单的例子，加入标准centos系统上已经安装了a、b、c三个软件包，是安装d必须的软件包。那么当我们要在自己的机器上安装d软件包时就要预先安装a、b、c三个软件包。这里仅仅要预先安装3个软件包，假如有很多软件包请求呢，假如a软件包又要请求f、g、h软件包呢。这里的假如不仅仅是假如，很多时候用rpm安装软件的时候是存在的。你要做的就是，递归（请允许我用这个词）安装所有相关的rpm包。很多时候，你会为了安装相关的包，累的一塌糊涂。
	
3. ##yum安装

	&emsp;&emsp;**简单介绍。**可以看出来rpm包安装过程中突出的问题是，软件包的依赖关系。为了解决rpm安装过程中的依赖关系，退出了在线安装的方式yum安装（类似于deban系类的apt-get）。

	&emsp;&emsp;**命令** <br/>
	`yum search "software"`&emsp;查找要安装的软件，加双引号的好处是可以使用通配符。<br/>
	`yum install software`&emsp;安装软件<br/>
	`yum install -y software`&emsp;安装软件<br/>
	`yum remove -y softeware`&emsp;卸载软件<br/>
	`yum list installed`&emsp;列出所有应经安装的软件包,包括rpm安装的<br/>
	`yum list extras`&emsp;列出所有的rpm安装的软件包<br/>
	`yum list update`&emsp;列出所有需要更新的软件包<br/>
	`yum info pakg`&emsp;列出软件包的说明信息<br/>
	`yum info installed`&emsp;列出已经安装的软件包的说明信息<br/>
	`yum info extras`&emsp;列出所有rpm安装的软件的信息<br/>
	`yum update`&emsp;更新本地缓存的从服务器上下载的软件安装的头文件<br/>
	`yum clean all`&emsp;删除本地缓存的“头”文件。

	&emsp;&emsp;**优缺点**<br/>
	&emsp;&emsp;优点。yum软件的管理方式，解决软件安装包之间的依赖关系。同时，在本地缓存远程服务器的软件包的头文件，并及时更新，软件安装十分方便，不用搜索到指定的网站查找和自己系统巷匹配的rpm包。缺点。yum的repository的软件包资源有限，同时软件的更新频率较慢。

4. ##脚本安装
	
	&emsp;&emsp;**简单介绍**。源码安装、rpm和yum安装往往能解决很到一部分问题。但是，有时候我们还有安装第三方软件。这些软件不是官方或者社区发布的。当然，软件的依赖关系也是没有记录下来的。这个时候脚本安装就起作用了。脚本安装很类似windows上的软件安装方式“start->next->next->chooseSomething->finish”。脚本安装就是把需要的安装环境的配置等复杂的过程用程序判断、解决了。

	&emsp;&emsp;**命令**<br/>
	`./install.sh`&emsp;启动安装脚本。

	&emsp;&emsp;**优缺点**<br/>
	&emsp;&emsp;优点。脚本安装屏蔽了一些安装细节，把用户需要配置的部分暴露给用户供用户选择，简单方便。缺点。shell script所安装的软件一般是第三方发布的软件，软件的安全性不强。同时，如果管理员不注意安装脚本，有时候会被别人写入其他代码。要记住在执行install.sh脚本的时候使用的是root权限。比较人性化的程序猿会给个uninstall.sh脚本，卸载会比较方便。但是如果没有卸载脚本的话，也是比较坑的。

5. ##其他安装方式

	`yum groupinstall "development tools"`&emsp;批量安装软件<br/>
	`yum grouplist`&emsp;列出组软件<br/>
	`yum groupinfo groupsofrware`&emsp;查询组软件信息<br/>

##总结

&emsp;&emsp;习惯性的说几句总结吧。安装软件前，仔细分析软件的用途，是否要考虑到以后的卸载（源码安装），是否要安装最新的版本（源码安装），是否要考虑到安全性（脚本暗转，yum源，rpm下载的网站，源码的版本和下载的网站），软件的依赖关系是否好解决（rpm暗转），是普通用户专用还是所有用户共享（源码安装）。没有同一的方法，只有挑选最适合的方法。